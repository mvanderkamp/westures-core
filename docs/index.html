<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home | westures-core</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
        
            <link type="text/css" rel="stylesheet" href="styles/custom.css">
        
    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: 0px; height: 0px">
        
            <img src="img/toast-ui.png" width="100%" height="100%">
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">westures-core</a></h1>
        
            <span class="version">v1.0.0-alpha.4</span>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="westures-core.Gesture.html">Gesture</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures-core.Gesture_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="westures-core.Gesture.html#element">element</a></li><li><a href="westures-core.Gesture.html#handler">handler</a></li><li><a href="westures-core.Gesture.html#id">id</a></li><li><a href="westures-core.Gesture.html#options">options</a></li><li><a href="westures-core.Gesture.html#type">type</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="westures-core.Gesture.html#cancel">cancel</a></li><li><a href="westures-core.Gesture.html#end">end</a></li><li><a href="westures-core.Gesture.html#isEnabled">isEnabled</a></li><li><a href="westures-core.Gesture.html#move">move</a></li><li><a href="westures-core.Gesture.html#start">start</a></li></ul></div></li><li><a href="westures-core.Input.html">Input</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures-core.Input_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="westures-core.Input.html#current">current</a></li><li><a href="westures-core.Input.html#identifier">identifier</a></li><li><a href="westures-core.Input.html#initial">initial</a></li><li><a href="westures-core.Input.html#phase">phase</a></li><li><a href="westures-core.Input.html#previous">previous</a></li><li><a href="westures-core.Input.html#startTime">startTime</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="westures-core.Input.html#totalDistance">totalDistance</a></li></ul></div></li><li><a href="westures-core.Point2D.html">Point2D</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures-core.Point2D_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="westures-core.Point2D.html#x">x</a></li><li><a href="westures-core.Point2D.html#y">y</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="westures-core.Point2D.html#.centroid">centroid</a></li><li><a href="westures-core.Point2D.html#.sum">sum</a></li><li><a href="westures-core.Point2D.html#angleTo">angleTo</a></li><li><a href="westures-core.Point2D.html#averageDistanceTo">averageDistanceTo</a></li><li><a href="westures-core.Point2D.html#clone">clone</a></li><li><a href="westures-core.Point2D.html#distanceTo">distanceTo</a></li><li><a href="westures-core.Point2D.html#minus">minus</a></li><li><a href="westures-core.Point2D.html#plus">plus</a></li><li><a href="westures-core.Point2D.html#totalDistanceTo">totalDistanceTo</a></li></ul></div></li><li><a href="westures-core.PointerData.html">PointerData</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures-core.PointerData_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="westures-core.PointerData.html#originalEvent">originalEvent</a></li><li><a href="westures-core.PointerData.html#point">point</a></li><li><a href="westures-core.PointerData.html#time">time</a></li><li><a href="westures-core.PointerData.html#type">type</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="westures-core.PointerData.html#angleTo">angleTo</a></li><li><a href="westures-core.PointerData.html#distanceTo">distanceTo</a></li></ul></div></li><li><a href="westures-core.Region.html">Region</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures-core.Region_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="westures-core.Region.html#addGesture">addGesture</a></li><li><a href="westures-core.Region.html#removeGesture">removeGesture</a></li><li><a href="westures-core.Region.html#removeGesturesByElement">removeGesturesByElement</a></li></ul></div></li><li><a href="westures-core.Smoothable.html">Smoothable</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures-core.Smoothable_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="westures-core.Smoothable.html">[@@cascade]</a></li><li><a href="westures-core.Smoothable.html#identity">identity</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="westures-core.Smoothable.html">[@@smooth]</a></li><li><a href="westures-core.Smoothable.html#average">average</a></li><li><a href="westures-core.Smoothable.html#next">next</a></li><li><a href="westures-core.Smoothable.html#restart">restart</a></li><li><a href="westures-core.Smoothable.html#~smoothingIsApplicable">smoothingIsApplicable</a></li></ul></div></li><li><a href="westures-core.State.html">State</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures-core.State_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="westures-core.State.html#active">active</a></li><li><a href="westures-core.State.html#activePoints">activePoints</a></li><li><a href="westures-core.State.html#centroid">centroid</a></li><li><a href="westures-core.State.html#event">event</a></li><li><a href="westures-core.State.html#inputs">inputs</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="westures-core.State.html#getInputsInPhase">getInputsInPhase</a></li><li><a href="westures-core.State.html#getInputsNotInPhase">getInputsNotInPhase</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Namespaces</h3><ul><li><a href="westures-core.html">westures-core</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="westures-core_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="westures-core.html#.CANCEL">CANCEL</a></li><li><a href="westures-core.html#.CANCEL_EVENTS">CANCEL_EVENTS</a></li><li><a href="westures-core.html#.END">END</a></li><li><a href="westures-core.html#.KEYBOARD_EVENTS">KEYBOARD_EVENTS</a></li><li><a href="westures-core.html#.MOUSE_EVENTS">MOUSE_EVENTS</a></li><li><a href="westures-core.html#.MOVE">MOVE</a></li><li><a href="westures-core.html#.PHASE">PHASE</a></li><li><a href="westures-core.html#.POINTER_EVENTS">POINTER_EVENTS</a></li><li><a href="westures-core.html#.START">START</a></li><li><a href="westures-core.html#.STATE_KEY_STRINGS">STATE_KEY_STRINGS</a></li><li><a href="westures-core.html#.STATE_KEYS">STATE_KEYS</a></li><li><a href="westures-core.html#.TOUCH_EVENTS">TOUCH_EVENTS</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="westures-core.html#.angularDifference">angularDifference</a></li><li><a href="westures-core.html#.setDifference">setDifference</a></li><li><a href="westures-core.html#.setFilter">setFilter</a></li></ul></div></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    









    


    <section>
        <article class="readme"><h1 id="westures-core">westures-core</h1>
<p><a href="https://travis-ci.org/mvanderkamp/westures-core"><img src="https://travis-ci.org/mvanderkamp/westures-core.svg?branch=master" alt="Build Status">
</a>
<a href="https://coveralls.io/github/mvanderkamp/westures-core?branch=release-1.0.0"><img src="https://coveralls.io/repos/github/mvanderkamp/westures-core/badge.svg?branch=master" alt="Coverage Status">
</a>
<a href="https://codeclimate.com/github/mvanderkamp/westures-core/maintainability"><img src="https://api.codeclimate.com/v1/badges/a5f4a4745352d6e2520c/maintainability" alt="Maintainability">
</a></p>
<p>This module contains the core functionality of the Westures JavaScript gesture
library. It is intended for use as a lighter-weight module to use if you do not
intend on using the base gestures included with the standard <a href="https://mvanderkamp.github.io/westures/">westures</a> module.</p>
<p>Visit this page for an example of the system in action: <a href="https://mvanderkamp.github.io/westures-example/">Westures Example</a>. Note that this is best viewed
on a touch device.</p>
<p>Westures is a fork of <a href="https://github.com/zingchart/zingtouch">ZingTouch</a>.</p>
<h2 id="quick-example">Quick Example</h2>
<pre class="prettyprint source lang-javascript"><code>// Import the module.
const wes = require('westures-core');

// Declare a region. The document body is probably a good one to use.
const region = new wes.Region(document.body);

// Instantiate a Gesture for an element within the region.
// Assumes a Pan gesture is available, and that the element you want to pan has
// been saved in the `element` variable.
const pan = new Pan(element, (data) => {
  // data.translation.x ...
  // data.translation.y ...
  // and so on, depending on the Gesture
});

// Add the gesture to the region.
region.addGesture(pan);
</code></pre>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#features">Features</a></li>
<li><a href="#overview">Overview</a></li>
<li><a href="#basic-usage">Basic Usage</a></li>
<li><a href="#implementing-custom-gestures">Implementing Custom Gestures</a></li>
<li><a href="#links">Links</a></li>
</ul>
<h2 id="features">Features</h2>
<ul>
<li>Full simultaneous multi-touch gesture support.
<ul>
<li>Continuous use of pointer input allows seamless flow from gesture to
gesture without interruption.</li>
</ul>
</li>
<li>Robust, simple to understand, easy to maintain engine.</li>
<li>Inertial smoothing capabilities for systems using coarse pointers (e.g. touch
surfaces).</li>
<li>Ability to enable / disable gestures with keys (e.g. ctrlKey, shiftKey)
<ul>
<li>This allows for easy implementation of single-pointer flows that provide
the same behaviour as multi-pointer flows. For example, holding 'CTRL' on
a desktop could switch from panning mode to rotating mode.</li>
</ul>
</li>
<li>Allows for easy implementation and integration of custom gestures using the
four-phase hook structure.</li>
</ul>
<h2 id="overview">Overview</h2>
<p>There are seven classes defined in this module:</p>
<ul>
<li><em>Gesture:</em> Respond to input phase &quot;hooks&quot; to define a gesture.</li>
<li><em>Input:</em> Track a single pointer through its lifetime, and store the progress
of gestures associated with that input.</li>
<li><em>Point2D:</em> Store and act on a 2-dimensional point.</li>
<li><em>PointerData:</em> Record data pertaining to a single user input event for a
single pointer.</li>
<li><em>Region:</em> Listen for user input events and respond appropriately.</li>
<li><em>Smoothable:</em> Datatype which provides inertial smoothing capabilities.</li>
<li><em>State:</em> Track all active Inputs within a Region.</li>
</ul>
<p>Additionally, two support files are defined:</p>
<ul>
<li><em>constants:</em> Constant values used throughout the engine.</li>
<li><em>utils:</em> Helpful utility functions.</li>
</ul>
<p>These classes are structured as follows:</p>
<p><img src="https://raw.githubusercontent.com/mvanderkamp/westures-core/master/arkit.svg?sanitize=true" alt="Graph of westures-core module"></p>
<h2 id="basic-usage">Basic Usage</h2>
<h3 id="importing-the-module">Importing the module</h3>
<pre class="prettyprint source lang-javascript"><code>const wes = require('westures-core');
</code></pre>
<h3 id="declaring-a-region">Declaring a Region</h3>
<p>First, decide what region should listen for events. This could be the
interactable element itself, or a larger region (possibly containing many
interactable elements). Behaviour may differ slightly based on the approach you
take, as a Region will perform locking operations on its interactable elements
and their bound gestures so as to limit interference between elements during
gestures, and no such locking occurs between Regions.</p>
<p>If you have lots of interactable elements on your page, you may find it
convenient to use smaller elements as regions. Test it out in any case, and see
what works better for you.</p>
<pre class="prettyprint source lang-javascript"><code>const region = new wes.Region(document.body);
</code></pre>
<h3 id="instantiating-a-gesture">Instantiating a Gesture</h3>
<p>When you instantiate a gesture, you need to provide a handler as well as an
Element. The gesture will only be recognized when the first pointer to interact
with the region was inside the given Element. Therefore unless you want to try
something fancy the gesture element should probably be contained inside the
region element. It could even be the region element.</p>
<p>Now for an example. Suppose you have a div within which you want to detect a Pan
gesture (assume that such a gesture is available). Your handler is called
<code>handler</code>, and the div is saved in the <code>element</code> variable.</p>
<pre class="prettyprint source lang-javascript"><code>const pan = new Pan(element, handler);
</code></pre>
<p>The <code>handler</code> function will be called whenever a Pan hook returns non-null data.
The data returned by the hook will be available inside <code>handler</code> as such:</p>
<pre class="prettyprint source lang-javascript"><code>function handler(data) {
  // data.translation.x ...
  // data.translation.y ...
  // and so on, depending on the gesture
}
</code></pre>
<p>That said, none of this will actually work until you add the gesture to the
region.</p>
<h3 id="adding-a-gesture-to-a-region">Adding a Gesture to a Region</h3>
<p>Simple:</p>
<pre class="prettyprint source lang-javascript"><code>region.addGesture(pan);
</code></pre>
<p>Now the <code>handler</code> function will be called whenever a <code>pan</code> gesture is detected
on the <code>#pannable</code> element inside the region.</p>
<h2 id="implementing-custom-gestures">Implementing Custom Gestures</h2>
<p>The core technique used by Westures is to process all user inputs and filter
them through four key lifecycle phases: <code>start</code>, <code>move</code>, <code>end</code>, and <code>cancel</code>.
Gestures are defined by how they respond to these phases. To respond to the
phases, a gesture extends the <code>Gesture</code> class provided by this module and
overrides the method (a.k.a. &quot;hook&quot;) corresponding to the name of the phase.</p>
<p>The hook, when called, will receive the current State object of the region. To
maintain responsiveness, the functionality within a hook should be short and as
efficient as possible.</p>
<p>For example, a simple way to implement a 'Tap' gesture would be as follows:</p>
<pre class="prettyprint source lang-javascript"><code>const { Gesture } = require('westures-core');

const TIMEOUT = 100;

class Tap extends Gesture {
  constructor() {
    super('tap');
    this.startTime = null;
  }

  start(state) {
    this.startTime = Date.now();
  }

  end(state) {
    if (Date.now() - this.startTime &lt;= TIMEOUT) {
        return state.getInputsInPhase('end')[0].current.point;
    }
    return null;
  }
}
</code></pre>
<p>There are problems with this example, and it should probably not be used as an
actual Tap gesture, it is merely to illustrate the basic idea.</p>
<p>The default hooks for all Gestures simply return null. Data will only be
forwarded to bound handlers when a non-null value is returned by a hook.
Returned values should be packed inside an object. For example, instead of just
<code>return 42;</code>, a custom hook should do <code>return { value: 42 };</code></p>
<p>For information about what data is accessible via the State object, see the full
documentation <a href="https://mvanderkamp.github.io/westures-core/State.html">here</a>.
Note that his documentation was generated with <code>jsdoc</code>.</p>
<h3 id="default-data-passed-to-handlers">Default Data Passed to Handlers</h3>
<p>As you can see from above, it is the gesture which decides when data gets passed
to handlers, and for the most part what that data will be. Note though that a
few properties will get added to the outgoing data object before the handler is
called. Those properties are:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>centroid</td>
<td>Point2D</td>
<td>The centroid of the input points.</td>
</tr>
<tr>
<td>event</td>
<td>Event</td>
<td>The input event which caused the gesture to be recognized</td>
</tr>
<tr>
<td>phase</td>
<td>String</td>
<td>'start', 'move', or 'end'</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>The name of the gesture as specified by its designer.</td>
</tr>
<tr>
<td>target</td>
<td>Element</td>
<td>The Element that is associated with the recognized gesture.</td>
</tr>
</tbody>
</table>
<p>If data properties returned by a hook clashes with one of these properties, the
value from the hook gets precedent and the default is overwritten.</p>
<h2 id="changes">Changes</h2>
<p>See the <a href="https://github.com/mvanderkamp/westures-core/blob/master/CHANGELOG.md">changelog</a> for the
most recent updates.</p>
<h2 id="issues">Issues</h2>
<p>If you find any compatibility issues, please let me know!</p>
<h2 id="links">Links</h2>
<h3 id="westures">westures</h3>
<ul>
<li><a href="https://www.npmjs.com/package/westures">npm</a></li>
<li><a href="https://github.com/mvanderkamp/westures">github</a></li>
<li><a href="https://mvanderkamp.github.io/westures/">documentation</a></li>
</ul>
<h3 id="westures-core-2">westures-core</h3>
<ul>
<li><a href="https://www.npmjs.com/package/westures-core">npm</a></li>
<li><a href="https://github.com/mvanderkamp/westures-core">github</a></li>
<li><a href="https://mvanderkamp.github.io/westures-core/">documentation</a></li>
</ul></article>
    </section>






</div>

<footer>
    <img class="logo" src="img/toast-ui.png" style="width: 0px; height: 0px">
    <div class="footer-text">Westures: Robust Multitouch Gestures</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = 'package:westures-core_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>